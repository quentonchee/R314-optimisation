!function () { const t = { fcp: null, lcp: null, cls: 0, clsEntries: [] }, e = t => null == t ? "-" : t.toFixed(0) + " ms"; try { const n = new PerformanceObserver(e => { for (const o of e.getEntries()) "first-contentful-paint" === o.name && null == t.fcp && (t.fcp = o.startTime, r(), n.disconnect()) }); n.observe({ type: "paint", buffered: !0 }) } catch (t) { } try { const e = new PerformanceObserver(e => { for (const n of e.getEntries()) t.lcp = n.renderTime || n.loadTime || n.startTime; r() }); e.observe({ type: "largest-contentful-paint", buffered: !0 }), addEventListener("visibilitychange", () => { document.visibilityState && "hidden" === document.visibilityState && e.takeRecords() }) } catch (t) { } try { const e = new PerformanceObserver(e => { for (const n of e.getEntries()) n.hadRecentInput || (t.cls += n.value, t.clsEntries.push(n)); r() }); e.observe({ type: "layout-shift", buffered: !0 }) } catch (t) { } const n = document.createElement("div"); n.setAttribute("id", "perf-panel"), Object.assign(n.style, { position: "fixed", right: "16px", bottom: "16px", zIndex: 9999, width: "200px", maxWidth: "90vw", fontFamily: "ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial", background: "rgba(10,12,28,.9)", color: "#E8ECF1", border: "1px solid rgba(255,255,255,.12)", borderRadius: "12px", boxShadow: "0 10px 40px rgba(0,0,0,.5)", backdropFilter: "blur(6px) saturate(120%)", padding: "12px 14px" }), n.innerHTML = '<div style="display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px"><strong style="letter-spacing:.2px">Évaluation perfs</strong><div><button id="perf-refresh" style="background:#7C5CFF;color:white;border:0;border-radius:8px;padding:6px 10px;cursor:pointer">Mesurer</button><button id="perf-close" style="background:transparent;color:#c9d1d9;border:1px solid rgba(255,255,255,.2);border-radius:8px;padding:6px 8px;margin-left:6px;cursor:pointer">×</button></div></div><div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;font-size:13px"><div><div style="opacity:.8">FCP</div><div id="m-fcp" style="font-weight:600">-</div></div><div><div style="opacity:.8">LCP</div><div id="m-lcp" style="font-weight:600">-</div></div><div><div style="opacity:.8">CLS</div><div id="m-cls" style="font-weight:600">-</div></div></div><div style="margin-top:8px;font-size:12px;opacity:.8"><div id="m-note">Cliquez sur <em>Mesurer</em> après vos modifications.</div></div>', document.addEventListener("DOMContentLoaded", () => { document.body.appendChild(n) }); function r() { const o = t => n.querySelector(t); o("#m-fcp").textContent = e(t.fcp), o("#m-lcp").textContent = e(t.lcp), o("#m-cls").textContent = t.cls ? t.cls.toFixed(3) : "-", window.__metrics = { fcp: t.fcp, lcp: t.lcp, cls: t.cls } } document.addEventListener("click", t => { t.target && "perf-refresh" === t.target.id && r(), t.target && "perf-close" === t.target.id && n.remove() }), addEventListener("load", () => { setTimeout(r, 0) }) }();
